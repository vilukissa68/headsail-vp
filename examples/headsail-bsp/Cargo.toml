[package]
name = "headsail-bsp"
version = "0.1.0"
edition = "2021"

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[features]
hpc-rt = ["hpc", "rt", "dep:riscv-peripheral", "dep:riscv-pac"]
sysctrl-rt = [
    "sysctrl",
    "rt",
    "riscv-rt/single-hart",
    "riscv/critical-section-single-hart",
]
panic-apb-uart0 = []
hpc = []
sysctrl = []
alloc = ["dep:good_memory_allocator", "hpc"]
sdram = []
vp = []
asic = []

# This is generated by the above options, don't use directly
rt = ["dep:riscv-rt"]

[dependencies]
ufmt = "0.2.0"
riscv-rt = { version = "0.12.2", optional = true }
riscv = { version = "0.11.1" }
riscv-peripheral = { version = "0.1.0", optional = true }
riscv-pac = { version = "0.1.1", optional = true }
good_memory_allocator = { version = "0.1.7", optional = true }
bit_field = "0.10.2"

[[example]]
name = "panic"
path = "examples/panic.rs"
required-features = ["panic-apb-uart0", "rt"]

[[example]]
name = "uart0"
path = "examples/uart0.rs"
required-features = ["rt"]

[[example]]
name = "uart0_read"
path = "examples/uart0_read.rs"
required-features = ["alloc", "rt", "sdram"]

[[example]]
name = "sprintln"
path = "examples/sprintln.rs"
required-features = ["rt"]

[[example]]
name = "alloc"
path = "examples/alloc.rs"
required-features = ["alloc", "rt", "sdram"]

[[example]]
name = "timer0"
path = "examples/timer0.rs"
required-features = ["panic-apb-uart0", "rt"]

[[example]]
name = "interrupts"
path = "examples/interrupts.rs"
required-features = ["panic-apb-uart0", "hpc-rt"]

[profile.dev]
panic = "abort"

[profile.release]
panic = "abort"
